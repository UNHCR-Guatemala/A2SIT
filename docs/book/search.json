[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Admin2 Severity Index Tool",
    "section": "",
    "text": "Welcome\nThis is the detailed documentation of the Admin2 Severity Index Tool (A2SIT), which was developed by the UNCHR.\nThe aim of this documentation is to explain in detail:\n\nHow to use the app\nThe methodology behind the A2SIT\nTechnical details\n\nThis documentation is under development!"
  },
  {
    "objectID": "intro.html",
    "href": "intro.html",
    "title": "1  What is A2SIT?",
    "section": "",
    "text": "Here we explain what the A2SIT is, the motivation behind it etc.\nWe could put also information about indicators here or in chapters in this book."
  },
  {
    "objectID": "summary.html",
    "href": "summary.html",
    "title": "2  Summary",
    "section": "",
    "text": "In summary, this book has no content whatsoever.\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "layout.html",
    "href": "layout.html",
    "title": "3  App layout",
    "section": "",
    "text": "layout\nexport\nsessions\nhelp"
  },
  {
    "objectID": "data_input.html#template",
    "href": "data_input.html#template",
    "title": "4  Data input",
    "section": "4.1 Template",
    "text": "4.1 Template\nThe A2SIT app generates customised templates for each country. To download the template, select your country from the dropdown menu, then click the “Download country template” button.\n\nThe dropdown menu contains all the countries currently supported by the app1.\nThe next step is to fill in the template with your data. Opening the template, you will find that it has three tabs:\n\nIntro: instructions on how to fill in the template\nData: this is where you enter your indicator data\nStructure: this defines the structure of the index\n\nThe first tab is simply information and is ignored by the A2SIT app. We will also walk through the compilation of the spreadsheet here. Importantly, do not change the names of the Data and Structure tabs: these are tab names expected by the app.\n\n4.1.1 Data\nThe data tab contains a table which looks something like this:\n\nIn this table (excluding the metadata rows/columns), each row represents one Admin 2 region, and each column is one indicator.\nThe admin2Pcode column has the main codes used by the app, and this is automatically filled in depending on the country you have selected. These codes must not be edited because they are used to generate the maps later on in the app. The Name column has the corresponding name of each region. These names may be edited if you wish, although it is recommended not to edit them unless they contain spelling errors etc.\nThe next columns to the right are the data columns: this is where you should paste your indicator data. The number of columns here will depend on how many indicators you have. You can expand the table as far as you want. Consider some important rules though:\n\nAll indicator data must be numerical. You cannot enter words like “yes”/“no”, or categories such as “XL”, “L”, etc. The app only understands numerical indicator data. Also data that looks numerical, like “10 million” will not work: it should be 10000000!\nEach indicator data column should be accompanied by the metadata cells above it (name, group, direction, etc). Copy these cells as far as necessary. Do not leave metadata cells with no indicator data below them (delete these if this happens).\nTry to fill in data for every Admin2 code. Admin2 codes with no indicator data will be deleted by the app.\nDo not input data for rows where there are no Admin2 codes.\nMake sure each indicator has at least some data available. Indicators with no data can still be input into the app, but they will be automatically removed.\n\nThe best way to see what the correctly-formatted input data looks like is to simply download the example data set.\nThe row immediately above the indicator data contains the indicator code. These should be short unique codes which identify the indicator. Ideally these should be about 8 characters long or less, have no spaces, and should start with a letter (not a number). Examples could be “GDPpc”, “Migrants”, “Gini”. These will be used in some plots in the app, so it will help you if they are descriptive.\nThe next row above is the indicator name. These can be longer indicator names which will also be displayed in the app. Examples can be “GDP per capita”, “Gini coefficient” and so on.\nThe row above the indicator name is the group to which the indicator belongs in the level immediately above it. This defines the structure of the index and is explained in detail in the Structure section below.\nThe direction row defines the direction of each indicator. An indicator that shares the same “direction” as the index should have a “1” - such indicators in the context of Severity could be rates of domestic violence, or the number of displaced people. Higher values of these indicators imply higher severity. On the other hand, indicators such as coverage of public services, number of hospitals, etc run in the opposite direction: higher values imply less severity, therefore they should be assigned a direction of “-1”. The direction row can only take values of -1 or 1.\nFinally, the initial weight row gives a weight for each indicator. It is recommended to leave these all at “1” (representing equal weighting) unless you have good reasons for doing otherwise. The weights are used in the aggregation step later in the app to calculate the index scores, and can be used to increase or decrease the contribution of each indicator. However, weighting can be complex and highly subjective. If you do wish to adjust weights, consider that weights are relative within each aggregation group: they will be rescaled to sum to 1 within each group by the app. In other words, if we have three indicators in a group with weights 1, 1, and 1, they will each get a weight of 1/3.\n\n\n4.1.2 Structure\nThe “Structure” tab contains a table which defines the structure of the index. This is pre-compiled so there is no need to edit it unless you want to. However, it is a little more complex than the data tab.\n\n\n\nThe “Structure” tab from the example data set.\n\n\nEach row in the table gives details about one of the aggregates created by aggregating indicators together, with columns describing their attributes:\n\niCode is the code assigned to the aggregate.\nParent is the parent iCode: this defines which group the aggregate is in, in the level immediately above.\niName is a longer name assigned to the aggregate.\nLevel is the level in the framework, where 1 is the indicator level, 2 is the level created by aggregating indicators, and so on.\nWeight is the weight assigned to the aggregate. As mentioned previously, weights are relative within aggregation groups.\n\nThe iCode, Parent and Level columns together define the structure of the index. For example, in the example above the first four aggregates (at level 2) are defined as belonging to the “Socio_econ” group in level 3, according to the Parent column. The “Socio_econ” aggregate itself is defined in row 23 as belonging to the “vulnerabilidad” dimension, in level 4. Finally, the “Vulnerabilidad” dimension itself is one of four main dimensions of the “MVI”, which is the top level index at level 5.\nNotice that all the iCodes with Level = 2 are the entries in the “Group” row of the Data tab. This is to define where in the index each group is positioned.\nYou can edit the Structure table to include any number of aggregation groups and levels. However, keep in mind:\n\nEvery indicator or aggregate must have a parent, unless it is at the top level. You cannot define a parent that is more than one level above - if needed, define intermediate aggregates with only one indicator/aggregate.\nAll the codes in the “Group” row of the Data tab must be included in the Structure table.\n\nThe “Structure” table is in fact a simplified version of the “iMeta” table that is used in the COINr package upon which the A2SIT app is based. If you run into problems, or want to learn more about these input tables, you may wish to read the relavant COINr documentation page."
  },
  {
    "objectID": "data_input.html#upload",
    "href": "data_input.html#upload",
    "title": "4  Data input",
    "section": "4.2 Upload",
    "text": "4.2 Upload\nOnce the template has been correctly compiled, you are ready to upload it to the app.\n\nOn the “Upload” tab, first make sure you have selected the correct country in the dropdown, then browse to the your input data file and click the “Load” button. At this point, either the data upload will be successful or not. Here’s what to do.\n\n4.2.1 Successful\n\nIf the data upload is successful, the app should give several immediate outputs. First, a confirmation message that the upload was successful, then some summary information and possibly some messages.\nThe summary information will consist of a header which reports the country name, and also the number of indicators and regions.\n\nBelow this will be a sunburst plot of the framework you have specified, which should look something like this:\n\nThis is a plot of the index framework as specified in the Structure table. Hovering over segments will show indicator names, and clicking on segments will zoom in on lower levels. Double click to reset the plot. Like most plots in the app, a snapshot of the plot can be downloaded as a png file by clicking the small camera icon in the upper right of the plot.\nThe framework plot also shows the effective weight of each indicator and aggregate in the framework, as a result of the weights specified and the index structure, as the angle of each segment. Notice that where dimensions have more indicators, these are effectively (individually) weighted less. This is important to consider in defining the index structure.\n\nFinally, there may be some additional messages in the “Messages” box. In our example, we receive several messages - these relate to the fact that the app has detected some indicators with no data points and removed them (since they cannot be used in the calculations). Furthermore, it has found some aggregate groups with no “children” (indicators) defined in them. These empty groups also cannot be used in the calculation and so are removed. Check these messages carefully to ensure the app is not doing anything you don’t want to do.\nFrom here, if you are happy with the details reported by the app, you can move to the next tab.\n\n\n4.2.2 Unsuccessful\n\nIf you do have trouble uploading your data, don’t worry! The input is a little complex but the app will try to tell you what the problem is.\nIf the upload is unsuccessful, the app should report a helpful error message in the “Messages” box. For example:\n  \nTry to address the problem reported by the app. There may be more than one problem but the app will only report the first one it finds, so you may need to upload more than once to correct multiple problems. If you have trouble, re-read very carefully the rules in the sections above and check the example data set. Common problems could be:\n\nMismatch between Structure and Data tables: remember that codes are case-sensitive, and cross check very carefully to ensure that all group names from the Data table are in the Structure table.\nNon-numeric data: make sure each column of data is actually formatted as numeric. Even it looks like a number, Excel may have interpreted it as text. In Excel, a cell formatted as a number will be right-aligned, whereas text is left-aligned (see below).\n\n\n\nAltering spreadsheet: try above all to avoid modifying the spreadsheet in unexpected ways. For example, do not add extra or numbers in cells near the tables. Do not change the names of required columns, and don’t move tables, or rename tabs. You CAN add extra tabs to the spreadsheet with other calculations as the app will only look for the Data and Structure tabs."
  },
  {
    "objectID": "data_input.html#whats-next",
    "href": "data_input.html#whats-next",
    "title": "4  Data input",
    "section": "4.3 What’s next",
    "text": "4.3 What’s next\nFrom here, things get a lot smoother: the app should now work with fairly minimal interventions on your part. Move to the “Analysis” tab to begin analysing your data!"
  },
  {
    "objectID": "data_input.html#footnotes",
    "href": "data_input.html#footnotes",
    "title": "4  Data input",
    "section": "",
    "text": "This list represents the countries for which Admin 2 shape files are available for mapping.↩︎"
  },
  {
    "objectID": "analysis.html#analysis-table",
    "href": "analysis.html#analysis-table",
    "title": "5  Indicator analysis",
    "section": "5.1 Analysis table",
    "text": "5.1 Analysis table\nThe main output of this tab is the the analysis table, which gives one row for each indicator and in particular flags any potential statistical issues by highlighting cells in yellow.\n\nHere, “statistical issues” refers to problems identified automatically for each indicator. These should be treated as flags, over which you have the final decision whether they constitute a real problem or not. Here, each column is explained in more detail.\nThe first column, % availability refers to the percentage of data availability for that indicator. This is in a way the most important column. Here, if an indicator has less than 66% data availability, it will be flagged (highlighted yellow). Consider that 66% is a subjective threshold, although it is often used in the context of composite indicators. If the indicator has less, it could potentially be considered for removal unless it is very important to keep it. Indicators with very low data availability (less than 50%) should ideally not be included unless there is a very strong reason to do so.\nThe % same column reports the number of data points that share a single common value. For example, 50% of points are zero, this will be 50%. It is flagged if greater than 50%. The idea here is to point to indicators which have a low power in discriminating between Admin 2 regions - if most of the indicator values are the same, the indicator is arguably not very useful.\nThe Skew/kurtosis column gives the skewness and kurtosis values for each indicator - these are used as simple indicators of outliers: if an indicator has absolute skewness &gt; 2 and kurtosis &gt; 3.5 it is flagged. Outliers can be a problem in the aggregation step: they result in the scale of the indicator being dominated by some few outlying values. Note however that outliers are automatically treated when calculating the results - see Chapter 6.\nThe next two columns, Collinear with and Negatively correlated with give details of any indicators with which the indicators is collinear with (defined as correlation &gt; 0.9), or negatively correlated with (defined as correlation &lt; -0.4), within the same aggregation group at level 2. Collinearity between indicators can point to double counting, where effectively the same information is present in two indicators. Negative correlations can cause problems in aggregation, because high values of one indicator can cancel out low values of the other. It is recommended to check any flagged issues here using the scatter plot tool (described below).\nFinally, the Status column reports whether the indicator is currently included or excluded (by default all indicators are included). Removal of indicators is explained in the next section.\nAltogether, the table aims to highlight at a glance any possible statistical issues with indicators. Keep in mind that indicators are never “perfect”, and there will likely be various issues flagged in your data set. Of the criteria in the table, the data availability is probably the most important - indicators with low availability can add little, and in the worst case be misleading. The others can be considered as “small flags”, but if an indicator has multiple flags, it could be examined more closely to see whether it is really worth including it or not."
  },
  {
    "objectID": "analysis.html#indicator-information",
    "href": "analysis.html#indicator-information",
    "title": "5  Indicator analysis",
    "section": "5.2 Indicator information",
    "text": "5.2 Indicator information\n\nThe indicator information box reports information about the indicator currently selected in the analysis table. This includes the parent groups which the indicator belongs to, its maximum and minimum values, mean and median, and its data availability. It is worth checking these numbers to make sure they agree with the expected definition of the indicator. For example, an indicator which is a percentage should generally have values in the range 0-100, but certainly not negative. This can be a simple way to spot any errors in compiling the indicator data.\nFinally, this box also includes the option to remove the selected indicator by clicking the “Remove” button, and to restore any removed indicators with the “Restore” button. When an indicator is removed, it is not included in the calculation of the index scores on the following tabs, but the data is still retained in the app so it can easily be replaced.\nIndicators can of course also be added and removed in your input data spreadsheet, and this is probably the best place to make heavy modifications. The in-app feature may be more useful for quick “what if” experiments."
  },
  {
    "objectID": "analysis.html#distribution",
    "href": "analysis.html#distribution",
    "title": "5  Indicator analysis",
    "section": "5.3 Distribution",
    "text": "5.3 Distribution\n\nThe distribution plot shows the statistical distribution of the indicator selected in the analysis table. The intention is to show visually how each indicator might be skewed, or contain outliers. This can also be useful to spot errors, e.g. incorrect data points. Click on the “gear” icon in the top right corner of the box to toggle between a histogram and violin plot.\nAgain, visual inspection of each indicator is highly recommended to double check that the data values follow the kind of distributions and ranges you would expect."
  },
  {
    "objectID": "analysis.html#scatter-plot",
    "href": "analysis.html#scatter-plot",
    "title": "5  Indicator analysis",
    "section": "5.4 Scatter plot",
    "text": "5.4 Scatter plot\n\nThe scatter plot allows to plot any indicator against any other. The x-axis indicator is selected by selecting an row in the analysis table. The y-axis indicator is controlled by clicking the “gear” icon in the top right and using the drop-down menu. Here you can also optionally add a linear trend line and toggle log axes (the latter option useful for skewed indicators). Hovering over points reveals details of the region and values.\nScatter plots are useful to assess the relationships between indicators, but can also identify outliers and help spot any errors. In the analysis table, where indicators are flagged as being collinear or negatively correlated, it is recommended to check them here to see if the relationships reveal anything unusual."
  },
  {
    "objectID": "results.html#calculation-of-results",
    "href": "results.html#calculation-of-results",
    "title": "6  Exploring results",
    "section": "6.1 Calculation of results",
    "text": "6.1 Calculation of results\nWhen you first click on the Results tab, behind the scenes the app runs a series of calculations which result in the index scores, and all the other aggregate scores. This is done automatically so there is no need for any user input. The calculation follows recognised international methodology1, and the steps are as follows:\n\nTreat any outliers\nNormalise indicators onto a 1-100 scale\nAggregate using the weighted arithmetic mean, using the weights specified in your input spreadsheet.\n\nNote that the aggregate scores are scaled in two different ways: either using the 1-100 scale, or they are rescaled onto a categorical 1-5 scale. Both scales can be viewed in the app. The detailed explanation of these steps is left for Chapter 11 and Chapter 12."
  },
  {
    "objectID": "results.html#map-and-table",
    "href": "results.html#map-and-table",
    "title": "6  Exploring results",
    "section": "6.2 Map and table",
    "text": "6.2 Map and table\n\nIn the main “Results” box, the top level of the index is plotted on the map, with colour shading representing the index scores. The map is interactive, allowing you to pan and zoom using by clicking and dragging, or scrolling with the mouse wheel.\nHovering over each region gives further details about the region, including its score and rank. Clicking on a region will open a box in the bottom left with more details, including its scores and ranks for the aggregation level below the index, as well as its overall score and rank. Clicking on the “Go to profile” link here will go to an even more detailed profile of that region, which is explained later in Chapter 7.\nYou can change which indicator or aggregate is plotted on the map using the uppermost dropdown menu in the top right of this box. You can also select whether to view the scores as a 1-5 (categorical) scale or on the 1-100 scale (raw values at the indicator level).\nThe map is downloadable in various formats by selecting the file format (either png, jpeg, pdf or html) and clicking the “download map” link. Capturing the map images is unfortunately not perfect and you may have to experiment a little to get the best results. An alternative, which can offer more control, may be to download the map as an HTML file, then open it in a separate tab, and save the image there using the “print to pdf” functionality in your browser, or to simply take a screenshot (in the latter case, you can maximise the window with F11 and take a screenshot of the full window using Windows’ “snipping” tool, for example).\nIn the same “Results” box you can also select the “Table” tab to see the results as a table.\n\nThe table is colour-formatted to help highlight high and low values. The table rows are sorted by the highest index score downwards, and the columns are sorted from the highest level downwards. You can sort the table by different columns by clicking on the column headers, and search for particular units using the search box."
  },
  {
    "objectID": "results.html#bar-chart",
    "href": "results.html#bar-chart",
    "title": "6  Exploring results",
    "section": "6.3 Bar chart",
    "text": "6.3 Bar chart\n\nUnderneath the Results box, there is a bar chart of the same indicator/aggregate shown on the map. Use the “gear” icon in the top right for more options: by default only the top 50 regions are shown but you can select the bottom 50, or all. The checkbox selects whether to break down scores into their components on the bar chart - these are the underlying indicators aggregates at the level immediately below. Clicking on a bar here will also give details about that region in the box in the bottom left of the map."
  },
  {
    "objectID": "results.html#scenarios",
    "href": "results.html#scenarios",
    "title": "6  Exploring results",
    "section": "6.4 Scenarios",
    "text": "6.4 Scenarios\nBy default the index is calculated using the arithmetic mean, which implies that low (high) scores in one indicator are perfectly compensated by high (low) scores in another. Optionally, select “Scenario 2” which uses the geometric mean: in this case lower scores in one indicator are less compensated by higher scores in others. Click “Recalculate” to see the new results.\nImportantly, the scenario selected here will be used as the “main” results in the rest of the app, including in the “Profiles” and “Region comparison” tabs. All scenarios can additionally be compared in one place in the “Scenarios” tab, which is explained in Chapter 8.\nClicking on the ‘gear’ icon in the top right of this box opens the option to adjust weights. If this is enabled, you can interactively adjust weights for the highest level of the index (below the index). However, in general equal weights are strongly recommended unless there is a specific reason to weight otherwise.\nMore details on the aggregation methods are given in Chapter 12."
  },
  {
    "objectID": "results.html#footnotes",
    "href": "results.html#footnotes",
    "title": "6  Exploring results",
    "section": "",
    "text": "Specifically the JRC/OECD Handbook on Composite Indicators, and guidance from the European Commission’s Competence Centre on Composite Indicators and Scoreboards.↩︎"
  },
  {
    "objectID": "profiles.html#details-table",
    "href": "profiles.html#details-table",
    "title": "7  Region profiles",
    "section": "7.1 Details table",
    "text": "7.1 Details table\nThe Details table gives full details of all aggregate and indicator scores for the selected region. The columns of the table are colour-formatted to help spot higher values at a glance.\n\nThe table can easily be sorted by clicking on the table headers - for example to see which indicators score or rank the highest. It can also be filtered by using the boxes under the table headers, for example filtering only to view indicators (level 1). The Search box allows to filter to specific indicators of interest by entering text there.\nRecall that all data and results can also be downloaded as an Excel spreadsheet, and this is probably the best way to explore the results in fine detail. This is explained in Chapter 3."
  },
  {
    "objectID": "profiles.html#dimensions",
    "href": "profiles.html#dimensions",
    "title": "7  Region profiles",
    "section": "7.2 Dimensions",
    "text": "7.2 Dimensions\nThe Dimensions box aims to show at a glance the scores or indicator values of the selected region, for any selected group.\n\nBy default, the app will show the scores of the region for the aggregates immediately below the index level. Where possible, group scores will be plotted on a radar chart (as shown above), unless the number of aggregates in the group is less than three - in this case, it is not possible to plot a meaningful radar chart, and a table will be displayed.\nTo change which group to show, click the “gear” icon in the top right of the box, and select the group to display using the dropdown. Here you can also toggle between a table and a radar chart (the latter only where possible, as mentioned above)."
  },
  {
    "objectID": "profiles.html#highestlowest-ranks",
    "href": "profiles.html#highestlowest-ranks",
    "title": "7  Region profiles",
    "section": "7.3 Highest/lowest ranks",
    "text": "7.3 Highest/lowest ranks\nThe last two boxes on this tab show the highest and lowest ranked indicators as tables.\n\nThese tables are composed by searching across all indicators and displaying those with the five highest and lowest ranks across all regions. This can help to point to specific indicators that are driving high or low scores at the index level."
  },
  {
    "objectID": "scenarios.html#table",
    "href": "scenarios.html#table",
    "title": "8  Scenarios",
    "section": "8.1 Table",
    "text": "8.1 Table\nThe main output here is the scenario comparison table. By default, this displays the ranks of each region, with columns for each scenario. The table can be sorted by clicking on the headers, allowing to sort by each scenario. The colour formatting intends to highlight where scores differ from one scenario to the next.\n\nClicking on the “gear” icon in the top right of this box gives various options for adjusting the table. In the first dropdown you can select whether to use ranks (default) or scores as the basis of comparison. In general, when comparing between different methodologies, ranks make more sense in that changing the aggregation method can lead to scores on quite different scales.\nThe second dropdown can be used to display either the rank/score values, or the (absolute) differences between each scenario and the “base” scenario. The base scenario is the one in the leftmost scenario column, and this can be changed by the third dropdown menu. Examining rank differences in particular is useful to highlight regions which are particularly affected by scenario changes. If a region is sensitive to the scenario, it may be worth examining it more closely to find out why, in the profile tab or else by downloading the data."
  },
  {
    "objectID": "scenarios.html#scatter-plot",
    "href": "scenarios.html#scatter-plot",
    "title": "8  Scenarios",
    "section": "8.2 Scatter plot",
    "text": "8.2 Scatter plot\nThe scatter plot on the right gives a visual comparison of any pair of scenarios. By default this shows the ranks of the first two scenarios plotted against each other. Hovering over each point gives the name of the region. The scatter plot is a useful visual tool to see at a glance the spread between two scenarios, and which regions change the most.\n\nClicking on the “gear” icon reveals some more options: you can select which scenarios to plot on the x and y axes, and also whether to plot the ranks or the scores."
  },
  {
    "objectID": "unit_comparison.html",
    "href": "unit_comparison.html",
    "title": "9  Region comparisons",
    "section": "",
    "text": "The final tab in the app is dedicated to comparisons between regions. This is a simple interface, where the two regions to compare against each other are selected using the first two dropdown menus at the top of the page. The values to show in the table are controlled by the third dropdown menu - either as ranks, scores or the severity category.\n\nThe table is similar to the “Details” table on the “Profiles” tab. It shows the values for each aggregate and indicator, from the index level downwards, and also shows the parent group. The score/rank/categorical columns are colour coded such that the unit with the highest value is highlighted. This is intended to show visually where one region is more “severe” than the other.\nAs with other tables, you can sort and filter the table by clicking on the headers and using the boxes, respectively."
  },
  {
    "objectID": "meth_overview.html",
    "href": "meth_overview.html",
    "title": "10  Overview",
    "section": "",
    "text": "R, COINr, back end."
  },
  {
    "objectID": "data_processing.html",
    "href": "data_processing.html",
    "title": "11  Data processing",
    "section": "",
    "text": "Data cleaning, outlier treatment, normalisation"
  },
  {
    "objectID": "aggregation_weighting.html",
    "href": "aggregation_weighting.html",
    "title": "12  Aggregation and weighting",
    "section": "",
    "text": "content"
  },
  {
    "objectID": "technical_implementation.html#package-overview",
    "href": "technical_implementation.html#package-overview",
    "title": "13  Technical implementation",
    "section": "13.1 Package overview",
    "text": "13.1 Package overview\nThe A2SIT package is set up as a typical R package - for an overview of R package structure see the R Packages book.\n\nfs::dir_tree(\"../\", recurse = F)\n\n../\n├── A2SIT.Rproj\n├── A2SIT_Doc\n├── app.R\n├── data\n├── DESCRIPTION\n├── dev\n├── docs\n├── inst\n├── LICENSE\n├── LICENSE.md\n├── man\n├── NAMESPACE\n├── NEWS.md\n├── not_package\n├── R\n├── README.md\n├── shiny_bookmarks\n├── tests\n└── vignettes\n\n\nThe main folders of interest here are:\n\n/R, which contains all the R code for the front and back end of the app\n/A2SIT_Doc, which is the source files for the long-form documentation (this book)\n/Data, which contains data saved within the package\n/Docs, which is the rendered version of the long-form documentation (this book)\n/inst. which contains accessory files and resources that are used within the app\n/man, which is the function documentation\n/tests, which are the unit tests\n\nThe remaining folders are either created by the Golem package, which has been used to help deploy the app, or are related to smaller technical things such as Shiny bookmarking (explained later). The other files in the top level directory relate to deploying the app (app.R), and to the package itself."
  },
  {
    "objectID": "technical_implementation.html#section",
    "href": "technical_implementation.html#section",
    "title": "13  Technical implementation",
    "section": "13.2 ",
    "text": "13.2"
  },
  {
    "objectID": "technical_implementation.html#back-end",
    "href": "technical_implementation.html#back-end",
    "title": "13  Technical implementation",
    "section": "13.3 Back-end",
    "text": "13.3 Back-end\nA first version of the back-end code for the app was encapsulated in a standalone R package called MVI_Guatemala. This was developed before the front end of the app, and since the back end code had to be heavily modified and extended, it was simply copied into the present A2SIT package, rather than calling the previous package and needing to edit/maintain two packages. Therefore the previous package still exists as a kind of “legacy” version of the current package.\nTo understand the back end structure of the app, the best place to start is in app_sever.R, which defines the server function of the app. Here you will find:\n\nShared reactive variables which are passed between modules\nThe modules themselves, and variables which are explicitly passed to them\nSome specific components that exist outside of the modules, such as export to Excel and R, the modal help windows, and the bookmarking feature\n\nTo understand each of these features, it is necessary to follow the functions called there. To give a little help, the modal help windows are written in markdown files which live in the ./inst/md-help folder, and are displayed using the “bsplus” package. Shiny bookmarking uses the “server” implementation, but additionally adds the coin to the saved file. Shiny bookmarks create folders in the ./shiny_bookmarks directory.\n\n13.3.1 Data flow\nThe app is based around the COINr package, as mentioned previously. COINr encapsulates a composite indicator in an object called a “coin”, which can be manipulated by COINr functions and used to return information and plots. The coin is therefore the central object in the app.\nIn the input module, the user uploads a formatted spreadsheet of data and metadata, which is read by the app and used to build a coin. This task is performed by the f_data_input() function. The function reads the user spreadsheet and manipulates the data so that it can be used to create a coin. It also removes any indicators/units without data, and tries to catch any user errors in formatting and return helpful error messages.\nThe coin is then passed to the analysis module, which largely returns outputs to the user such as plots and tables. Here, users can optionally remove indicators, so this implies some small modifications to the coin.\nNext, the coin is passed to the results module when the user arrives there. This triggers the results to be calculated, which implies running the f_build_index() function, and calculating alternative scenarios via the get_scenarios() function.\nThe tabs following this do not edit the coin - they simply read from it and display outputs. At any time, the coin is used to generate an Excel output using the f_export_to_excel() function, or to write the coin to an .Rdata file."
  },
  {
    "objectID": "technical_implementation.html#front-end",
    "href": "technical_implementation.html#front-end",
    "title": "13  Technical implementation",
    "section": "13.4 Front-end",
    "text": "13.4 Front-end\nThe app is built using Shiny, specifically using shinydashboard and shinydashboardplus. These packages give the “box” layout of the app, and also enable the sidebar menu, collapsible boxes and pop-out side bars in the boxes.\nThe UI of the app is defined in the app_UI.R file, where the menu items, tabs and headers/footers are specified."
  },
  {
    "objectID": "technical_implementation.html#contributing",
    "href": "technical_implementation.html#contributing",
    "title": "13  Technical implementation",
    "section": "13.5 Contributing",
    "text": "13.5 Contributing\nTo"
  },
  {
    "objectID": "technical_implementation.html#code-overview",
    "href": "technical_implementation.html#code-overview",
    "title": "13  Technical implementation",
    "section": "13.2 Code overview",
    "text": "13.2 Code overview\nAll code is found in the /R folder, as required by R package convention. The R files here aim to follow reasonably intuitive naming conventions.\nTo begin with, the app is run by calling the run_app() function, which lives in the run_app.R file. This is the starting point of the app, and if you want to see how the code is structured you should start here and follow the trail.\nConsider that to run the app, if you have installed the package you will need to first call library(A2SIT). If you have cloned the repo (see later in this chapter) and you are working with the source code, you will need to use devtools::load_all(\".\") to load the functions of the package into the namespace.\nAt the next level down, the UI and Server functions which define the Shiny app are found in the app_server.R and app_UI.R functions respectively. If you are not familiar with the structure of a Shiny app, the Mastering Shiny book is an excellent resource.\nThe app is built using Shiny modules, and each module is contained within files following a mod_*.R naming pattern. The modules each correspond to the seven tabs in the app.\nThe modules call back-end functions which live in files following a f_*.R naming pattern. There is one of these files for each module, except the “Welcome” module/tab.\nThere are also a number of utility functions which are used between modules, and these live in files named as utils_*.R. The remaining files are either generated by Golem but not used very much, or relate to specific things which are mentioned later."
  }
]